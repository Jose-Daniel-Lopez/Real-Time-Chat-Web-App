<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <title>Spring Boot WebSocket Chat Application</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <link rel="stylesheet" href="/css/main.css" />
</head>
<body>
<noscript>
  <div class="alert alert-danger text-center m-3">
    <h2>Sorry! Your browser doesn't support Javascript</h2>
  </div>
</noscript>

<!-- Username Page -->
<div id="username-page" class="container-fluid vh-100 d-flex align-items-center justify-content-center">
  <div class="card shadow-lg border-0 rounded-4">
    <div class="card-header bg-primary text-white text-center border-0 rounded-top-4 py-3">
      <h2 class="mb-0">Welcome to Chat</h2>
    </div>
    <div class="card-body p-4">
      <form id="usernameForm" name="usernameForm">
        <div class="mb-4">
          <label for="name" class="form-label">Enter your username</label>
          <div class="input-group">
            <span class="input-group-text bg-light"><i class="bi bi-person-fill"></i></span>
            <input type="text" id="name" placeholder="Username" autocomplete="off" class="form-control form-control-lg shadow-none" />
          </div>
        </div>
        <div class="d-grid">
          <button type="submit" class="btn btn-primary btn-lg rounded-3">
            <i class="bi bi-chat-dots-fill me-2"></i>Start Chatting
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Chat Page -->
<div id="chat-page" class="hidden container-fluid vh-100 d-flex align-items-center justify-content-center">
  <div class="card shadow-lg border-0 rounded-4 chat-container">
    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center py-3 border-0 rounded-top-4">
      <button class="btn btn-sm btn-outline-light border-0" id="back-button" onClick="window.location.reload()">
        <i class="bi bi-arrow-left"></i>
      </button>
      <h3 class="mb-0 fs-5">Spring WebSocket Chat</h3>
      <!-- -->
      <span class="badge bg-light text-primary rounded-pill" id="online-count"><i class="bi bi-person-fill"></i>2</span>
    </div>

    <div class="connecting alert alert-info mb-0 rounded-0 text-center">
      <i class="bi bi-arrow-repeat me-2"></i>Connecting...
    </div>

    <div class="card-body d-flex flex-column p-0">
      <ul id="messageArea" class="list-unstyled flex-grow-1 overflow-auto p-3 mb-0">
        <!-- Messages will be added here by JavaScript -->
      </ul>
    </div>

    <div class="card-footer bg-white border-top-0 p-3 rounded-bottom-4">
      <form id="messageForm" name="messageForm" autocomplete="off">
        <div class="input-group">
          <input type="text" id="message" placeholder="Type a message..." autocomplete="off" class="form-control shadow-none border-end-0" />
          <button type="submit" class="btn btn-primary">
            <i class="bi bi-send-fill"></i>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.1.4/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
<script src="/js/main.js"></script>
</body>
</html>
